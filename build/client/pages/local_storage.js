// Generated by CoffeeScript 1.3.3
var soma;

soma = require('soma');

soma.views({
  LocalStorage: {
    selector: 'body',
    create: function() {
      var _this = this;
      try {
        window.hasLocalStorage = window.localStorage != null;
        if (window.hasLocalStorage != null) {
          window.setLocalStorage = function(name, item) {
            return window.localStorage.setItem(name, item != null ? JSON.stringify(item) : null);
          };
          window.getLocalStorage = function(name) {
            return JSON.parse(window.localStorage.getItem(name));
          };
          return window.getAndSyncCookiesAndLocalStorage = function(name) {
            var value;
            value = _this.cookies.get(name);
            if (!value && window.hasLocalStorage) {
              value = window.getLocalStorage(name);
              _this.cookies.set(name, value);
            }
            window.setLocalStorage(name, value);
            return value;
          };
        }
      } catch (e) {
        return window.hasLocalStorage = false;
      }
    }
  }
});
