// Generated by CoffeeScript 1.3.3
var animation;

animation = typeof exports !== "undefined" && exports !== null ? exports : provide('./animation', {});

animation.Animation = (function() {

  function Animation() {}

  Animation.prototype.frame = function() {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {
      return window.setTimeout((function() {
        return callback(+new Date());
      }), 11);
    };
  };

  Animation.prototype.start = function(time, method) {
    var _this = this;
    this.time = time;
    this.method = method;
    this.stopped = false;
    this.lastTime = null;
    this.elapsed = 0;
    return this.frame()(function(t) {
      return _this.tick(t);
    });
  };

  Animation.prototype.tick = function(time) {
    var portion,
      _this = this;
    if (this.stopped) {
      return;
    }
    if (this.lastTime != null) {
      this.elapsed += time - this.lastTime;
      portion = this.elapsed / this.time;
      if (this.method(portion)) {
        return;
      }
    }
    this.lastTime = time;
    return setTimeout((function() {
      return _this.frame()(function(t) {
        return _this.tick(t);
      });
    }), 0);
  };

  Animation.prototype.stop = function() {
    return this.stopped = true;
  };

  return Animation;

})();
