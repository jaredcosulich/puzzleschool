// Generated by CoffeeScript 1.3.3
var gravity;

gravity = typeof exports !== "undefined" && exports !== null ? exports : provide('./lib/gravity', {});

gravity.ViewHelper = (function() {

  ViewHelper.prototype.MAX_RADIUS = 40;

  function ViewHelper(_arg) {
    this.el = _arg.el;
    this.initGravityWell();
  }

  ViewHelper.prototype.$ = function(selector) {
    return $(selector, this.el);
  };

  ViewHelper.prototype.initGravityWell = function() {
    var _this = this;
    return this.el.bind('mousedown.well', function(e) {
      var well;
      well = _this.createWell(e.offsetX, e.offsetY);
      return _this.el.bind('mouseup.well', function(e) {
        return _this.stopWell(well);
      });
    });
  };

  ViewHelper.prototype.createWell = function(x, y) {
    var well;
    well = $(document.createElement('DIV'));
    well.addClass('well');
    well.css({
      left: x,
      top: y
    });
    $('.wells').append(well);
    this.modifyWell(well, 0);
    return well;
  };

  ViewHelper.prototype.modifyWell = function(well, radius) {
    var _this = this;
    if (well.data('stopped') != null) {
      return;
    }
    radius += 1;
    if (radius > this.MAX_RADIUS) {
      return;
    }
    well.css({
      boxShadow: "0px 0 " + (radius * 2) + "px " + radius + "px rgba(255,255,255,1) invert"
    });
    return setTimeout((function() {
      return _this.modifyWell(well, radius);
    }), radius * 2);
  };

  ViewHelper.prototype.stopWell = function(well) {
    return well.data('stopped', true);
  };

  return ViewHelper;

})();
