// Generated by CoffeeScript 1.3.3
var circuitousEditor;

circuitousEditor = typeof exports !== "undefined" && exports !== null ? exports : provide('./lib/circuitous_editor', {});

circuitousEditor.EditorHelper = (function() {

  function EditorHelper(_arg) {
    this.viewHelper = _arg.viewHelper, this.getInstructions = _arg.getInstructions, this.hashReplacements = _arg.hashReplacements;
    this.init();
  }

  EditorHelper.prototype.init = function() {
    var _this = this;
    return this.viewHelper.board.addChangeListener(function() {
      return _this.changeHash();
    });
  };

  EditorHelper.prototype.changeHash = function() {
    var escape, instructions, replace, replaceWith, _ref;
    instructions = this.getInstructions();
    escape = function(string) {
      return string.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    };
    _ref = this.hashReplacements;
    for (replaceWith in _ref) {
      replace = _ref[replaceWith];
      instructions = instructions.replace(new RegExp(escape(replace), 'g'), replaceWith);
    }
    return location.hash = instructions;
  };

  return EditorHelper;

})();
