// Generated by CoffeeScript 1.3.3
var LEVELS, soma, wings;

soma = require('soma');

wings = require('wings');

soma.chunks({
  Code: {
    meta: function() {
      return new soma.chunks.Base({
        content: this
      });
    },
    prepare: function(_arg) {
      this.classId = _arg.classId, this.levelId = _arg.levelId;
      this.template = this.loadTemplate("/build/common/templates/puzzles/code.html");
      this.loadScript('http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js');
      this.loadScript('/build/common/pages/puzzles/lib/code.js');
      this.loadStylesheet('/build/client/css/puzzles/code.css');
      return this.level = LEVELS[1];
    },
    build: function() {
      this.setTitle("Code Puzzles - The Puzzle School");
      return this.html = wings.renderTemplate(this.template, {
        challenge: this.level.challenge,
        editors: this.level.editors,
        description: this.level.description,
        hints: this.level.hints
      });
    }
  }
});

soma.views({
  Code: {
    selector: '#content .code',
    create: function() {
      var code;
      code = require('./lib/code');
      return this.helper = new code.ViewHelper({
        el: this.el
      });
    },
    nextLevel: function() {
      return console.log('NEXT LEVEL');
    }
  }
});

soma.routes({
  '/puzzles/code/:classId/:levelId': function(_arg) {
    var classId, levelId;
    classId = _arg.classId, levelId = _arg.levelId;
    return new soma.chunks.Code({
      classId: classId,
      levelId: levelId
    });
  },
  '/puzzles/code/:levelId': function(_arg) {
    var levelId;
    levelId = _arg.levelId;
    return new soma.chunks.Code({
      levelId: levelId
    });
  },
  '/puzzles/code': function() {
    return new soma.chunks.Code;
  }
});

LEVELS = [
  {}, {
    challenge: 'Figure out how to change the word "Welcome" to the word "Hello World\'".',
    editors: [
      {
        title: 'Page HTML',
        type: 'html',
        code: '<html>\n    <body>\n        <h1>Hi</h1>\n    </body>\n</html>'
      }
    ],
    description: '<p>\n    The code displayed in the \'editor\' (where it says \'Page HTML\') \n    is all the code you need to create the simplest website.\n</p>\n<p>\n    The &lt;h1> is used to designate important information and so is displayed in\n    bold large text.\n</p>\n<p>\n    You can learn more about the &lt;h1> tag by \n    <a href=\'https://www.google.com/search?q=h1+tag\' target=\'_blank\'>Googling \'h1 tag\'</a>.\n</p>',
    hints: [
      {
        index: 1,
        content: 'The \'editor\', where you see the words \'Page HTML\' is editable.'
      }, {
        index: 2,
        content: 'In the editor, change the word \'Welcome\' to \'Hello World\''
      }
    ]
  }
];
